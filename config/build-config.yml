---
# Build Configuration File
# This file contains configurable values used throughout the Packer build pipeline
# Values can be overridden via environment variables or workflow inputs where applicable

# Default Build Configuration
build:
  default_region: "us-east-1"
  build_name: "amazonlinux2023-golden-image"

# Instance Configuration
instance:
  # Instance type for building the AMI
  build_instance_type: "t3.micro"
  # Instance type for validation testing
  validation_instance_type: "t3.micro"
  # SSH username for Amazon Linux 2023 instances (not used with SSM, but kept for compatibility)
  ssh_username: "ec2-user"



# Block Device Configuration
block_device:
  device_name: "/dev/xvda"
  volume_size: 30  # GB
  volume_type: "gp3"
  encrypted: true
  delete_on_termination: true

# CIS Benchmark Configuration
cis:
  # Default CIS level (1 or 2)
  default_level: 2
  # Default compliance threshold percentage (0-100)
  default_compliance_threshold: 80
  # Fail build if compliance below threshold
  default_fail_on_non_compliance: false
  # CIS level used during validation
  validation_level: 2
  # Compliance threshold for validation
  validation_threshold: 80
  # Fail validation if checks fail
  validation_fail_on_failure: false

# Parameter Store Configuration
parameter_store:
  base_path: "/packer/amazonlinux2023-golden-image"
  # Enable storing AMI IDs in Parameter Store
  enabled: true

# AWS Resource Tags
tags:
  # OS tag value
  os: "AmazonLinux2023"
  # ManagedBy tag value
  managed_by: "Packer"
  # Environment tag value
  environment: "development"

# AMI Distribution Configuration
# Target regions where AMIs will be copied after successful build
distribution:
  # Simple list format - all listed regions will be copied
  target_regions:
    - us-east-2      # US East (Ohio)
